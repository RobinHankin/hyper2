<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>The `ordertrans()` function in the `hyper2` package • hyper2</title>
<!-- jquery --><script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js" integrity="sha512-v2CJ7UaYy4JwqLDIrZUI/4hqeoQieOmAZNXBeQyjo21dadnwR+8ZaIJVT8EE2iyI61OV8e6M8PP2/4hpQINQ/g==" crossorigin="anonymous" referrerpolicy="no-referrer"></script><!-- Bootstrap --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/css/bootstrap.min.css" integrity="sha256-bZLfwXAP04zRMK2BjiO8iu9pf4FbLqX6zitd+tIvLhE=" crossorigin="anonymous">
<script src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/3.4.1/js/bootstrap.min.js" integrity="sha256-nuL8/2cJ5NDSSwnKD8VqreErSWHtnEP9E7AySL+1ev4=" crossorigin="anonymous"></script><!-- bootstrap-toc --><link rel="stylesheet" href="../bootstrap-toc.css">
<script src="../bootstrap-toc.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- pkgdown --><link href="../pkgdown.css" rel="stylesheet">
<script src="../pkgdown.js"></script><meta property="og:title" content="The `ordertrans()` function in the `hyper2` package">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body data-spy="scroll" data-target="#toc">


    <div class="container template-article">
      <header><div class="navbar navbar-default navbar-fixed-top" role="navigation">
  <div class="container">
    <div class="navbar-header">
      <button type="button" class="navbar-toggle collapsed" data-toggle="collapse" data-target="#navbar" aria-expanded="false">
        <span class="sr-only">Toggle navigation</span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
        <span class="icon-bar"></span>
      </button>
      <span class="navbar-brand">
        <a class="navbar-link" href="../index.html">hyper2</a>
        <span class="version label label-default" data-toggle="tooltip" data-placement="bottom" title="">3.1-0</span>
      </span>
    </div>

    <div id="navbar" class="navbar-collapse collapse">
      <ul class="nav navbar-nav">
<li>
  <a href="../reference/index.html">Reference</a>
</li>
<li class="dropdown">
  <a href="#" class="dropdown-toggle" data-toggle="dropdown" role="button" data-bs-toggle="dropdown" aria-expanded="false">
    Articles

    <span class="caret"></span>
  </a>
  <ul class="dropdown-menu" role="menu">
<li>
      <a href="../articles/dirichlet.html">The `dirichlet()` function in the `hyper2` package</a>
    </li>
    <li>
      <a href="../articles/icons.html">Public perception of climate change: the `icons` dataset in the `hyper2` package</a>
    </li>
    <li>
      <a href="../articles/ordertrans.html">The `ordertrans()` function in the `hyper2` package</a>
    </li>
    <li>
      <a href="../articles/zeropower.html">The zero-sum-power issue in the `hyper2` package</a>
    </li>
  </ul>
</li>
<li>
  <a href="../news/index.html">Changelog</a>
</li>
      </ul>
<ul class="nav navbar-nav navbar-right">
<li>
  <a href="https://github.com/RobinHankin/hyper2/" class="external-link">
    <span class="fab fa-github fa-lg"></span>

  </a>
</li>
      </ul>
</div>
<!--/.nav-collapse -->
  </div>
<!--/.container -->
</div>
<!--/.navbar -->



      </header><div class="row">
  <div class="col-md-9 contents">
    <div class="page-header toc-ignore">
      <h1 data-toc-skip>The <code>ordertrans()</code> function in the
<code>hyper2</code> package</h1>
                        <h4 data-toc-skip class="author">Robin K. S.
Hankin</h4>
            
      
      <small class="dont-index">Source: <a href="https://github.com/RobinHankin/hyper2/blob/master/vignettes/ordertrans.Rmd" class="external-link"><code>vignettes/ordertrans.Rmd</code></a></small>
      <div class="hidden name"><code>ordertrans.Rmd</code></div>

    </div>

    
    
<p><img src="../../../_temp/Library/hyper2/help/figures/hyper2.png" width="20%" style="float:right; padding:10px"></p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">ordertrans</span></span></code></pre></div>
<pre><code><span><span class="co">## function (x, players) </span></span>
<span><span class="co">## {</span></span>
<span><span class="co">##     if (missing(players)) {</span></span>
<span><span class="co">##         return(x[order(names(x))])</span></span>
<span><span class="co">##     }</span></span>
<span><span class="co">##     else {</span></span>
<span><span class="co">##         if (is.hyper2(players) | is.hyper3(players)) {</span></span>
<span><span class="co">##             players &lt;- pnames(players)</span></span>
<span><span class="co">##         }</span></span>
<span><span class="co">##     }</span></span>
<span><span class="co">##     stopifnot(length(x) == length(players))</span></span>
<span><span class="co">##     stopifnot(all(sort(names(x)) == sort(players)))</span></span>
<span><span class="co">##     stopifnot(all(table(names(x)) == 1))</span></span>
<span><span class="co">##     x[apply(outer(players, names(x), `==`), 1, which)]</span></span>
<span><span class="co">## }</span></span></code></pre>
<p>To cite the <code>hyper2</code> package in publications, please use
<span class="citation">Hankin (2017)</span>. The
<code><a href="../reference/ordertrans.html">ordertrans()</a></code> function can be difficult to understand and
this short document provides some sensible use-cases. The manpage
provides a very simple example, but here we are going to use an even
simpler example:</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>d<span class="op">=</span><span class="fl">2</span>,a<span class="op">=</span><span class="fl">3</span>,b<span class="op">=</span><span class="fl">1</span>,c<span class="op">=</span><span class="fl">4</span><span class="op">)</span></span>
<span><span class="va">x</span></span></code></pre></div>
<pre><code><span><span class="co">## d a b c </span></span>
<span><span class="co">## 2 3 1 4</span></span></code></pre>
<p>In the above, object <code>x</code> is a named vector with elements
<code>seq_along(x)</code> in some order. It means that competitor
<code>d</code> came second, competitor <code>a</code> came third,
<code>b</code> came first and <code>c</code> came fourth. Technically
<code>x</code> is an order vector because it answers the question “where
did a particular competitor come?” However, it might equally be a rank
vector because it answers the question “who came first? who came
second?” (see also the discussion at <code>rrank.Rd</code>).</p>
<p>But note that <code>x</code> is not helpfully structured to answer
either of these questions: you have to go searching through the names or
the ranks respectively—both of which may appear in any order—to find the
competitor or rank you are interested in. To find the rank vector (that
is, who came first, second etc), one would use <code><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort()</a></code>:</p>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/sort.html" class="external-link">sort</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## b d a c </span></span>
<span><span class="co">## 1 2 3 4</span></span></code></pre>
<p>But this is suboptimal to find the order vector [“where did a
particular competitor come?”]. For the order vector, we want to
rearrange the elements of <code>x</code> so that the names are in
alphabetical order. That way we can see straightaway where competitor
<code>a</code> placed (in this case, third). This nontrivial task is
accomplished by function <code><a href="../reference/ordertrans.html">ordertrans()</a></code>:</p>
<div class="sourceCode" id="cb7"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">o</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/ordertrans.html">ordertrans</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="co"># by default, sorts names() into alphabetical order</span></span>
<span><span class="va">o</span></span></code></pre></div>
<pre><code><span><span class="co">## a b c d </span></span>
<span><span class="co">## 3 1 4 2</span></span></code></pre>
<p>Observe that objects <code>x</code> and <code>o</code> are equal in
the sense that they are a rearrangement of one another:</p>
<div class="sourceCode" id="cb9"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">x</span>, <span class="va">o</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">4</span>,<span class="fl">1</span>,<span class="fl">2</span>,<span class="fl">3</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="sourceCode" id="cb11"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical</a></span><span class="op">(</span><span class="va">o</span>, <span class="va">x</span><span class="op">[</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">2</span>,<span class="fl">3</span>,<span class="fl">4</span>,<span class="fl">1</span><span class="op">)</span><span class="op">]</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<p>One consequence of this is that the resulting Plackett-Luce support
functions will be the same:</p>
<div class="sourceCode" id="cb13"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">Sx</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/hyper2/man/ordertable2supp.html" class="external-link">ordervec2supp</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## log( a * (a + b + c + d)^-1 * (a + c)^-1 * (a + c + d)^-1 * b * d)</span></span></code></pre>
<div class="sourceCode" id="cb15"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">So</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/pkg/hyper2/man/ordertable2supp.html" class="external-link">ordervec2supp</a></span><span class="op">(</span><span class="va">o</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## log( a * (a + b + c + d)^-1 * (a + c)^-1 * (a + c + d)^-1 * b * d)</span></span></code></pre>
<p>Note carefully that the two support functions above can be
mathematically identical but not formally <code><a href="https://rdrr.io/r/base/identical.html" class="external-link">identical()</a></code>
because neither the order of the brackets, nor the order of terms within
a bracket, is defined. They look the same on my system but YMMV. It is
possible that the two support functions might appear to be different
even though they are mathematically the same. We can verify that the two
are mathematically identical using package idiom <code>==</code>:</p>
<div class="sourceCode" id="cb17"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">Sx</span><span class="op">==</span><span class="va">So</span></span></code></pre></div>
<pre><code><span><span class="co">## [1] TRUE</span></span></code></pre>
<div class="section level3">
<h3 id="another-use-case">Another use-case<a class="anchor" aria-label="anchor" href="#another-use-case"></a>
</h3>
<p>How about this:</p>
<div class="sourceCode" id="cb19"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">x</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>d<span class="op">=</span><span class="fl">2</span>, a<span class="op">=</span><span class="fl">3</span>, c<span class="op">=</span><span class="fl">4</span>, b<span class="op">=</span><span class="fl">3</span>, e<span class="op">=</span><span class="fl">6</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## d a c b e </span></span>
<span><span class="co">## 2 3 4 3 6</span></span></code></pre>
<div class="sourceCode" id="cb21"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>e<span class="op">=</span><span class="fl">3</span>, c<span class="op">=</span><span class="fl">2</span>, a<span class="op">=</span><span class="fl">4</span>, b<span class="op">=</span><span class="fl">5</span>, d<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## e c a b d </span></span>
<span><span class="co">## 3 2 4 5 1</span></span></code></pre>
<div class="sourceCode" id="cb23"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">x</span><span class="op">+</span><span class="va">y</span></span></code></pre></div>
<pre><code><span><span class="co">## d a c b e </span></span>
<span><span class="co">## 5 5 8 8 7</span></span></code></pre>
<p>Above, observe that R is behaving as intended
<math display="inline" xmlns="http://www.w3.org/1998/Math/MathML"><semantics><mi>…</mi><annotation encoding="application/x-tex">\ldots</annotation></semantics></math>
but is potentially confusing. Take the first element. This has value
<code>2+5=7</code> and name <code>d</code> from the name of element 1 of
<code>x</code>. But it would be reasonable to ask for the first element
to be the sum of element <code>d</code> of <code>x</code> and element
<code>d</code> of <code>y</code>, which would be <code>2+1=3</code>.
This can be done with <code><a href="../reference/ordertrans.html">ordertrans()</a></code>:</p>
<div class="sourceCode" id="cb25"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ordertrans.html">ordertrans</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="../reference/ordertrans.html">ordertrans</a></span><span class="op">(</span><span class="va">y</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">## a b c d e </span></span>
<span><span class="co">## 7 8 6 3 9</span></span></code></pre>
<p>See how <code><a href="../reference/ordertrans.html">ordertrans()</a></code> has rearranged both <code>x</code>
and <code>y</code> so that the names are in alphabetical order.</p>
<p>But this is not perfect. Consider:</p>
<div class="sourceCode" id="cb27"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="op">(</span><span class="va">z</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span>f<span class="op">=</span><span class="fl">3</span>, g<span class="op">=</span><span class="fl">2</span>, h<span class="op">=</span><span class="fl">4</span>, a<span class="op">=</span><span class="fl">5</span>, b<span class="op">=</span><span class="fl">1</span><span class="op">)</span><span class="op">)</span>  <span class="co"># names NOT letters[1:5]</span></span></code></pre></div>
<pre><code><span><span class="co">## f g h a b </span></span>
<span><span class="co">## 3 2 4 5 1</span></span></code></pre>
<div class="sourceCode" id="cb29"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ordertrans.html">ordertrans</a></span><span class="op">(</span><span class="va">x</span><span class="op">)</span> <span class="op">+</span> <span class="fu"><a href="../reference/ordertrans.html">ordertrans</a></span><span class="op">(</span><span class="va">z</span><span class="op">)</span>  <span class="co"># arguably not well-defined</span></span></code></pre></div>
<pre><code><span><span class="co">##  a  b  c  d  e </span></span>
<span><span class="co">##  8  4  7  4 10</span></span></code></pre>
<p>In this case the result is arguably incorrect.</p>
</div>
<div class="section level3">
<h3 id="skating">Skating<a class="anchor" aria-label="anchor" href="#skating"></a>
</h3>
<p>Let us consider the skating dataset and use <code><a href="../reference/ordertrans.html">ordertrans()</a></code>
to study it (note that the skating dataset is analysed in more depth in
<code>skating.Rmd</code>).</p>
<div class="sourceCode" id="cb31"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">skating_table</span></span></code></pre></div>
<pre><code><span><span class="co">##             J1 J2 J3 J4 J5 J6 J7 J8 J9</span></span>
<span><span class="co">## hughes       1  4  3  4  1  2  1  1  1</span></span>
<span><span class="co">## slutskaya    3  1  1  1  4  1  2  3  2</span></span>
<span><span class="co">## kwan         2  3  2  2  2  3  3  2  3</span></span>
<span><span class="co">## cohen        5  2  4  3  3  4  4  4  4</span></span>
<span><span class="co">## suguri       4  8  5  5  5  7  5  5  5</span></span>
<span><span class="co">## butyrskaya   6  5  8  7 12  5  8  7  6</span></span>
<span><span class="co">## robinson     7  7  7  9  6  8 10  6  7</span></span>
<span><span class="co">## sebestyen    8 10 12  8  7  6 12  8  8</span></span>
<span><span class="co">## kettunen     9  9 13  6 13 10  7 11 14</span></span>
<span><span class="co">## volchkova   10  6 14 11 10 12  6  9 15</span></span>
<span><span class="co">## maniachenko 13 12 11 12 16 11 11 10  9</span></span>
<span><span class="co">## fontana     14 11 18 16  9 15  9 12 10</span></span>
<span><span class="co">## liashenko   15 13  6 10  8 14 13 14 16</span></span>
<span><span class="co">## onda        11 14 10 15 15 13 15 13 11</span></span>
<span><span class="co">## hubert      12 17 17 13 11 16 14 15 13</span></span>
<span><span class="co">## meier       16 16  9 14 14  9 16 16 12</span></span>
<span><span class="co">## gusmeroli   17 15 15 17 17 18 17 17 17</span></span>
<span><span class="co">## soldatova   19 18 22 20 21 17 18 18 19</span></span>
<span><span class="co">## hegel       20 21 16 22 18 19 21 19 18</span></span>
<span><span class="co">## giunchi     18 19 20 21 19 20 20 20 20</span></span>
<span><span class="co">## babiakova   22 20 19 19 20 21 19 22 22</span></span>
<span><span class="co">## kopac       21 22 23 18 22 22 22 21 21</span></span>
<span><span class="co">## luca        23 23 21 23 23 23 23 23 23</span></span></code></pre>
<p>We might ask how judges <code>J1</code> and <code>J2</code> compare
to one another? We need to create vectors like <code>x</code> and
<code>y</code> above:</p>
<div class="sourceCode" id="cb33"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">j1</span> <span class="op">&lt;-</span> <span class="va">skating_table</span><span class="op">[</span>,<span class="fl">1</span><span class="op">]</span>  <span class="co"># column 1 is judge number 1</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">j1</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">skating_table</span><span class="op">)</span></span>
<span><span class="va">j2</span> <span class="op">&lt;-</span> <span class="va">skating_table</span><span class="op">[</span>,<span class="fl">2</span><span class="op">]</span>  <span class="co"># column 2 is judge number 2</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">j2</span><span class="op">)</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colnames.html" class="external-link">rownames</a></span><span class="op">(</span><span class="va">skating_table</span><span class="op">)</span></span>
<span><span class="va">j1</span></span></code></pre></div>
<pre><code><span><span class="co">##      hughes   slutskaya        kwan       cohen      suguri  butyrskaya </span></span>
<span><span class="co">##           1           3           2           5           4           6 </span></span>
<span><span class="co">##    robinson   sebestyen    kettunen   volchkova maniachenko     fontana </span></span>
<span><span class="co">##           7           8           9          10          13          14 </span></span>
<span><span class="co">##   liashenko        onda      hubert       meier   gusmeroli   soldatova </span></span>
<span><span class="co">##          15          11          12          16          17          19 </span></span>
<span><span class="co">##       hegel     giunchi   babiakova       kopac        luca </span></span>
<span><span class="co">##          20          18          22          21          23</span></span></code></pre>
<div class="sourceCode" id="cb35"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">j2</span></span></code></pre></div>
<pre><code><span><span class="co">##      hughes   slutskaya        kwan       cohen      suguri  butyrskaya </span></span>
<span><span class="co">##           4           1           3           2           8           5 </span></span>
<span><span class="co">##    robinson   sebestyen    kettunen   volchkova maniachenko     fontana </span></span>
<span><span class="co">##           7          10           9           6          12          11 </span></span>
<span><span class="co">##   liashenko        onda      hubert       meier   gusmeroli   soldatova </span></span>
<span><span class="co">##          13          14          17          16          15          18 </span></span>
<span><span class="co">##       hegel     giunchi   babiakova       kopac        luca </span></span>
<span><span class="co">##          21          19          20          22          23</span></span></code></pre>
<div class="sourceCode" id="cb37"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/base/cbind.html" class="external-link">cbind</a></span><span class="op">(</span><span class="va">j1</span>,<span class="va">j2</span><span class="op">)</span></span></code></pre></div>
<pre><code><span><span class="co">##             j1 j2</span></span>
<span><span class="co">## hughes       1  4</span></span>
<span><span class="co">## slutskaya    3  1</span></span>
<span><span class="co">## kwan         2  3</span></span>
<span><span class="co">## cohen        5  2</span></span>
<span><span class="co">## suguri       4  8</span></span>
<span><span class="co">## butyrskaya   6  5</span></span>
<span><span class="co">## robinson     7  7</span></span>
<span><span class="co">## sebestyen    8 10</span></span>
<span><span class="co">## kettunen     9  9</span></span>
<span><span class="co">## volchkova   10  6</span></span>
<span><span class="co">## maniachenko 13 12</span></span>
<span><span class="co">## fontana     14 11</span></span>
<span><span class="co">## liashenko   15 13</span></span>
<span><span class="co">## onda        11 14</span></span>
<span><span class="co">## hubert      12 17</span></span>
<span><span class="co">## meier       16 16</span></span>
<span><span class="co">## gusmeroli   17 15</span></span>
<span><span class="co">## soldatova   19 18</span></span>
<span><span class="co">## hegel       20 21</span></span>
<span><span class="co">## giunchi     18 19</span></span>
<span><span class="co">## babiakova   22 20</span></span>
<span><span class="co">## kopac       21 22</span></span>
<span><span class="co">## luca        23 23</span></span></code></pre>
<p>In the above, see how objects <code>j1</code> and <code>j2</code>
have identical names, in the same order. Observe that
<code>hughes</code> is ranked 1 (that is, first) by <code>J1</code>, and
4 (that is, 4th) by <code>J2</code>. This makes it sensible to plot
<code>j1</code> against <code>j2</code>:</p>
<div class="sourceCode" id="cb39"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/par.html" class="external-link">par</a></span><span class="op">(</span>pty<span class="op">=</span><span class="st">'s'</span><span class="op">)</span>  <span class="co"># forces plot to be square</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">j1</span>,<span class="va">j2</span>,asp<span class="op">=</span><span class="fl">1</span>,pty<span class="op">=</span><span class="st">'s'</span>,xlim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">25</span><span class="op">)</span>,ylim<span class="op">=</span><span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">25</span><span class="op">)</span>,pch<span class="op">=</span><span class="fl">16</span>,xlab<span class="op">=</span><span class="st">'judge 1'</span>,ylab<span class="op">=</span><span class="st">'judge 2'</span><span class="op">)</span></span>
<span><span class="fu"><a href="https://rdrr.io/r/graphics/abline.html" class="external-link">abline</a></span><span class="op">(</span><span class="fl">0</span>,<span class="fl">1</span><span class="op">)</span>  <span class="co"># diagonal line</span></span>
<span><span class="kw">for</span><span class="op">(</span><span class="va">i</span> <span class="kw">in</span> <span class="fu"><a href="https://rdrr.io/r/base/seq.html" class="external-link">seq_along</a></span><span class="op">(</span><span class="va">j1</span><span class="op">)</span><span class="op">)</span><span class="op">{</span><span class="fu"><a href="https://rdrr.io/r/graphics/text.html" class="external-link">text</a></span><span class="op">(</span><span class="va">j1</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,<span class="va">j2</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">j1</span><span class="op">)</span><span class="op">[</span><span class="va">i</span><span class="op">]</span>,pos<span class="op">=</span><span class="fl">4</span>,col<span class="op">=</span><span class="st">'gray'</span>,cex<span class="op">=</span><span class="fl">0.7</span><span class="op">)</span><span class="op">}</span></span></code></pre></div>
<div class="figure">
<img src="ordertrans_files/figure-html/j1vsj2-1.png" alt="Judge 1 vs judge 2" width="576"><p class="caption">
Judge 1 vs judge 2
</p>
</div>
<p>In figure @ref(fig:j1vsj2), we see general agreement but differences
in detail. For example, <code>hughes</code> is ranked first by judge 1
and fourth by judge 2. However, other problems are not so easy. Suppose
we wish to compare the ranks according to likelihood with the ranks
according to some points system.</p>
<div class="sourceCode" id="cb40"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mL</span> <span class="op">&lt;-</span> <span class="va">skating_maxp</span>  <span class="co"># predefined; use maxp(skating) to calculate ab initio</span></span>
<span><span class="va">mL</span></span></code></pre></div>
<pre><code><span><span class="co">##    babiakova   butyrskaya        cohen      fontana      giunchi    gusmeroli </span></span>
<span><span class="co">## 5.047235e-06 5.304470e-03 9.024149e-02 3.683282e-04 1.137326e-05 8.316914e-05 </span></span>
<span><span class="co">##        hegel       hubert       hughes     kettunen        kopac         kwan </span></span>
<span><span class="co">## 9.785631e-06 2.689831e-04 2.983166e-01 1.376412e-03 2.996667e-06 2.655059e-01 </span></span>
<span><span class="co">##    liashenko         luca  maniachenko        meier         onda     robinson </span></span>
<span><span class="co">## 5.188626e-04 1.000000e-06 8.068792e-04 2.928089e-04 4.880190e-04 5.308262e-03 </span></span>
<span><span class="co">##    sebestyen    slutskaya    soldatova       suguri    volchkova </span></span>
<span><span class="co">## 2.588302e-03 3.088930e-01 1.269275e-05 1.845715e-02 1.138379e-03</span></span></code></pre>
<p>Note that in the above, the competitors’ names are in alphabetical
order. We first need to convert strengths to ranks:</p>
<div class="sourceCode" id="cb42"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mL</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="op">-</span><span class="va">mL</span><span class="op">)</span>  <span class="co"># minus because ranks orders from weak to strong</span></span>
<span><span class="va">mL</span></span></code></pre></div>
<pre><code><span><span class="co">##   babiakova  butyrskaya       cohen     fontana     giunchi   gusmeroli </span></span>
<span><span class="co">##          21           7           4          14          19          17 </span></span>
<span><span class="co">##       hegel      hubert      hughes    kettunen       kopac        kwan </span></span>
<span><span class="co">##          20          16           2           9          22           3 </span></span>
<span><span class="co">##   liashenko        luca maniachenko       meier        onda    robinson </span></span>
<span><span class="co">##          12          23          11          15          13           6 </span></span>
<span><span class="co">##   sebestyen   slutskaya   soldatova      suguri   volchkova </span></span>
<span><span class="co">##           8           1          18           5          10</span></span></code></pre>
<p>(note that the names are in the same order as before, alphabetical).
In the above we see that <code>slutskya</code> ranks first,
<code>hughes</code> second, and so on. Another way of ranking the
skaters is to use a Borda-type system: essentially the rowsums of the
table (and, of course, the <em>lowest</em> score wins):</p>
<div class="sourceCode" id="cb44"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mP</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/colSums.html" class="external-link">rowSums</a></span><span class="op">(</span><span class="va">skating_table</span><span class="op">)</span>  <span class="co"># 'P' for Points</span></span>
<span><span class="va">mP</span><span class="op">[</span><span class="op">]</span> <span class="op">&lt;-</span> <span class="fu"><a href="https://rdrr.io/r/base/rank.html" class="external-link">rank</a></span><span class="op">(</span><span class="va">mP</span>,ties<span class="op">=</span><span class="st">'first'</span><span class="op">)</span> <span class="co"># positive sign here</span></span>
<span><span class="va">mP</span></span></code></pre></div>
<pre><code><span><span class="co">##      hughes   slutskaya        kwan       cohen      suguri  butyrskaya </span></span>
<span><span class="co">##           1           2           3           4           5           6 </span></span>
<span><span class="co">##    robinson   sebestyen    kettunen   volchkova maniachenko     fontana </span></span>
<span><span class="co">##           7           8           9          10          11          13 </span></span>
<span><span class="co">##   liashenko        onda      hubert       meier   gusmeroli   soldatova </span></span>
<span><span class="co">##          12          14          16          15          17          18 </span></span>
<span><span class="co">##       hegel     giunchi   babiakova       kopac        luca </span></span>
<span><span class="co">##          19          20          21          22          23</span></span></code></pre>
<p>It is not at all obvious how to compare <code>mP</code> and
<code>mL</code>. For example, we might be interested in
<code>hegel</code>. It takes some effort to find that her likelihood
rank is 20 and her Borda rank is 19. Function <code><a href="../reference/ordertrans.html">ordertrans()</a></code>
facilitates this:</p>
<div class="sourceCode" id="cb46"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ordertrans.html">ordertrans</a></span><span class="op">(</span><span class="va">mP</span>,<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mL</span><span class="op">)</span><span class="op">)</span>  </span></code></pre></div>
<pre><code><span><span class="co">##   babiakova  butyrskaya       cohen     fontana     giunchi   gusmeroli </span></span>
<span><span class="co">##          21           6           4          13          20          17 </span></span>
<span><span class="co">##       hegel      hubert      hughes    kettunen       kopac        kwan </span></span>
<span><span class="co">##          19          16           1           9          22           3 </span></span>
<span><span class="co">##   liashenko        luca maniachenko       meier        onda    robinson </span></span>
<span><span class="co">##          12          23          11          15          14           7 </span></span>
<span><span class="co">##   sebestyen   slutskaya   soldatova      suguri   volchkova </span></span>
<span><span class="co">##           8           2          18           5          10</span></span></code></pre>
<p>See above how <code><a href="../reference/ordertrans.html">ordertrans()</a></code> shows the points-based ranks
but in alphabetical order, to facilitate comparison with
<code>mL</code>. We can now plot these against one another:</p>
<div class="sourceCode" id="cb48"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="https://rdrr.io/r/graphics/plot.default.html" class="external-link">plot</a></span><span class="op">(</span><span class="va">mL</span>,<span class="fu"><a href="../reference/ordertrans.html">ordertrans</a></span><span class="op">(</span><span class="va">mP</span>,<span class="fu"><a href="https://rdrr.io/r/base/names.html" class="external-link">names</a></span><span class="op">(</span><span class="va">mL</span><span class="op">)</span><span class="op">)</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="ordertrans_files/figure-html/crapplot-1.png" alt="points-based ranks vs likelihood ranks" width="576"><p class="caption">
points-based ranks vs likelihood ranks
</p>
</div>
<p>However, figure @ref(fig:crapplot) is a bit crude. Function
<code><a href="../reference/ordertrans.html">ordertransplot()</a></code> gives a more visually pleasing output, see
figure @ref(fig:showoffordertransplot).</p>
<div class="sourceCode" id="cb49"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ordertrans.html">ordertransplot</a></span><span class="op">(</span><span class="va">mL</span>,<span class="va">mP</span>,xlab<span class="op">=</span><span class="st">"likelihood rank"</span>,ylab<span class="op">=</span><span class="st">"Borda rank"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="ordertrans_files/figure-html/showoffordertransplot-1.png" alt="points=based rank vs likelihood rank using `ordertransplot()`" width="576"><p class="caption">
points=based rank vs likelihood rank using <code><a href="../reference/ordertrans.html">ordertransplot()</a></code>
</p>
</div>
<p>So now we may compare judge 1 against likelihood:</p>
<div class="sourceCode" id="cb50"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="fu"><a href="../reference/ordertrans.html">ordertransplot</a></span><span class="op">(</span><span class="va">mL</span>,<span class="va">j1</span>,xlab<span class="op">=</span><span class="st">"likelihood rank"</span>,ylab<span class="op">=</span><span class="st">"Judge 1 rank"</span><span class="op">)</span></span></code></pre></div>
<div class="figure">
<img src="ordertrans_files/figure-html/transplotjudge1-1.png" alt="Likelihood rank vs rank according to Judge 1" width="576"><p class="caption">
Likelihood rank vs rank according to Judge 1
</p>
</div>
<p>In figure @ref(fig:transplotjudge1), looking at the lower-left
corner, we see (reading horizontally) that the likelihood method placed
Slutskya first, then Hughes second, then Kwan third; while (reading
vertically) judge 1 placed Hughes first, then Kwan, then Slutskya.</p>
</div>
<div class="section level2">
<h2 class="unnumbered" id="references">References<a class="anchor" aria-label="anchor" href="#references"></a>
</h2>
<div id="refs" class="references csl-bib-body hanging-indent" entry-spacing="0">
<div id="ref-hankin2017_rmd" class="csl-entry">
Hankin, R. K. S. 2017. <span>“Partial Rank Data with the
<span><code>hyper2</code></span> Package: Likelihood Functions for
Generalized <span>B</span>radley-<span>T</span>erry Models.”</span>
<em>The R Journal</em> 9 (2): 429–39.
</div>
</div>
</div>
  </div>

  <div class="col-md-3 hidden-xs hidden-sm" id="pkgdown-sidebar">

      </div>

</div>



      <footer><div class="copyright">
  <p></p>
<p>Developed by Robin K. S. Hankin.</p>
</div>

<div class="pkgdown">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.1.0.</p>
</div>

      </footer>
</div>






  </body>
</html>
